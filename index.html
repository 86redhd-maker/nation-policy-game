<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>평범한 시민이었던 내가 S급 국가 지도자?!</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- 스캔라인 효과 -->
    <div class="scanlines"></div>

    <!-- 메인 컨테이너 -->
    <div class="container">
        <!-- 시작 화면 -->
        <div id="startScreen" class="screen active">
            <div class="main-title">
                <div class="title-text">🏛️ 평범한 시민이었던 내가 S급 국가 지도자?! 🏛️</div>
                <div class="subtitle">~ PIXEL POLITICS SIMULATOR ~</div>
                <div class="version-info">v2.0 Enhanced Edition</div>
            </div>

            <div class="nations-grid">
                <!-- 국가 카드들은 JS에서 동적 생성 -->
            </div>

            <div class="loading" id="loadingAnimation">
                <div class="loading-pixel"></div>
                <div class="loading-pixel"></div>
                <div class="loading-pixel"></div>
                <div class="loading-text">국가 데이터 로딩 중...</div>
            </div>

            <div class="start-section">
                <div class="start-message">
                    선택한 국가: <span id="selectedNation">국가를 선택해주세요</span>
                </div>
                <div class="nation-preview" id="nationPreview" style="display: none;">
                    <!-- 선택된 국가의 상세 정보 표시 -->
                </div>
                <div class="button-group">
                    <button class="pixel-btn" onclick="startGame()" id="startBtn" disabled>
                        🎮 게임 시작
                    </button>
                    <button class="pixel-btn secondary" onclick="showHelp()">
                        ❓ 게임 설명
                    </button>
                    <button class="pixel-btn secondary" onclick="showCredits()">
                        👥 크레딧
                    </button>
                </div>
            </div>
        </div>

        <!-- 게임 화면 -->
        <div id="gameScreen" class="screen">
            <!-- 상단 정보 바 -->
            <div class="game-header">
                <div class="nation-info">
                    <span class="nation-name-display" id="currentNationName">국가명</span>
                    <span class="turn-info" id="turnInfo">턴 1/5</span>
                </div>
                <div class="budget-info">
                    <span class="budget-amount" id="budgetAmount">💰 100pt</span>
                    <span class="budget-status" id="budgetStatus">✅ 안전</span>
                </div>
                <div class="game-progress">
                    <div class="progress-bar" id="gameProgress">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="progress-text" id="progressText">진행률: 20%</span>
                </div>
            </div>

            <!-- 지표 대시보드 -->
            <div class="indicators-panel">
                <div class="indicators-title">📊 국가 지표</div>
                <div class="indicators-grid" id="indicatorsGrid">
                    <!-- 지표들은 JS에서 동적 생성 -->
                </div>
                <div class="indicators-summary" id="indicatorsSummary">
                    <span class="total-score">총점: <span id="totalScore">0</span></span>
                    <span class="citizen-satisfaction">시민만족도: <span id="citizenSatisfaction">0.0</span></span>
                    <span class="sustainability">지속가능성: <span id="sustainability">0.0</span></span>
                </div>
            </div>

            <!-- 정책 선택 영역 - 새로운 자유 선택 시스템 -->
<div class="policy-section">
    <!-- 새로운 정책 헤더 -->
    <div class="policy-header-new">
        <div class="turn-info">
            <span class="turn-display" id="turnDisplay">턴 1/5</span>
            <span class="selection-count" id="selectionCount">선택: 0/2</span>
            <span class="budget-quick" id="budgetQuick">예산: 100pt</span>
        </div>
        
        <!-- 카테고리 탭들 -->
        <div class="category-tabs" id="categoryTabs">
            <button class="tab-btn active" data-category="복지" onclick="switchToCategory('복지')">
                ❤️ 복지 <span class="tab-count" id="tab-복지">0/4</span>
            </button>
            <button class="tab-btn" data-category="경제" onclick="switchToCategory('경제')">
                💰 경제 <span class="tab-count" id="tab-경제">0/4</span>
            </button>
            <button class="tab-btn" data-category="환경" onclick="switchToCategory('환경')">
                🌱 환경 <span class="tab-count" id="tab-환경">0/4</span>
            </button>
            <button class="tab-btn" data-category="교육" onclick="switchToCategory('교육')">
                📚 교육 <span class="tab-count" id="tab-교육">0/4</span>
            </button>
            <button class="tab-btn" data-category="외교" onclick="switchToCategory('외교')">
                🤝 외교 <span class="tab-count" id="tab-외교">0/4</span>
            </button>
        </div>
        
        <!-- 현재 선택된 정책들 미리보기 -->
        <div class="current-selection-preview" id="currentSelectionPreview" style="display: none;">
            <div class="preview-title">📋 현재 선택된 정책:</div>
            <div class="preview-policies" id="previewPolicies">
                <!-- 선택된 정책들이 여기에 표시됩니다 -->
            </div>
        </div>
    </div>
    
    <!-- 정책 그리드 (기존과 동일) -->
    <div class="policies-grid" id="policiesGrid">
        <!-- 정책 카드들은 JS에서 동적 생성 -->
    </div>

    <!-- 선택 요약 (기존과 동일하지만 위치 조정) -->
    <div class="selection-summary" id="selectionSummary">
        <!-- 선택된 정책 요약 -->
    </div>

    <!-- 교착상태 경고는 JS에서 동적으로 추가됨 -->

    <!-- 액션 버튼들 -->
    <div class="action-buttons">
        <button class="pixel-btn" onclick="confirmPolicies()" id="confirmBtn" disabled>
            ✅ 정책 확정
        </button>
        <button class="pixel-btn secondary" onclick="clearSelection()">
            🔄 선택 초기화
        </button>
        <button class="pixel-btn secondary" onclick="showAllPoliciesOverview()">
            👁️ 전체 정책 개요
        </button>
        <button class="pixel-btn secondary" onclick="showPolicyHelp()">
            💡 정책 도움말
        </button>
    </div>
</div>

        <!-- 시민 반응 패널 -->
        <div class="citizen-panel" id="citizenPanel">
            <div class="panel-header">💬 시민들의 반응</div>
            <div class="meme-display" id="memeDisplay">
                <!-- 밈 반응들 -->
            </div>
            <div class="panel-footer">
                <button class="mini-btn" onclick="hideCitizenPanel()">❌</button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div id="resultsScreen" class="screen">
    <div class="results-container" style="padding: 2rem; min-height: 100vh; background: white;">
        <div class="final-title" id="finalTitle">🏆 게임 완료!</div>
        
        <div class="ending-info" id="endingInfo">
            <div class="ending-title">게임 결과</div>
            <div class="ending-description">게임을 완주하셨습니다!</div>
            <div class="final-score">최종 점수: 계산 중...</div>
        </div>
        
        <div class="final-stats" id="finalStats">
            <div class="stat-group">
                <div class="stat-group-title">📊 게임 통계</div>
                <div class="stat-row"><span>통계</span><span>로딩 중...</span></div>
            </div>
        </div>
        
        <div class="achievements" id="achievements">
            <div class="achievements-title">🏆 달성 업적</div>
            <div class="achievement-item">🎯 게임 완주!</div>
        </div>
        
        <div class="replay-buttons">
            <button class="pixel-btn" onclick="restartGame()">🔄 다시 플레이</button>
            <button class="pixel-btn secondary" onclick="shareResults()">📤 결과 공유</button>
        </div>
    </div>
</div>

        <!-- 도움말 화면 (팝업) - 개선된 버전 -->
        <div id="helpPopup"
     class="popup-overlay"
     aria-hidden="true"
     onclick="if(event.target===this) closeHelp()">
  <div class="popup-content help-content"
       role="dialog"
       aria-modal="true"
       aria-labelledby="helpTitle">
    <div class="popup-header">
      <h3 id="helpTitle">❓ 게임 설명</h3>
      <button type="button" class="close-btn" onclick="closeHelp()">✖</button>
    </div>

    <div class="popup-body">
      <div class="help-navigation">
        <button class="help-tab-btn active" onclick="showHelpTab('basic', event)">🎯 기본 규칙</button>
        <button class="help-tab-btn" onclick="showHelpTab('indicators', event)">📊 지표 설명</button>
        <button class="help-tab-btn" onclick="showHelpTab('nations', event)">🏛️ 국가 특성</button>
        <button class="help-tab-btn" onclick="showHelpTab('tips', event)">💡 게임 팁</button>
        <button class="help-tab-btn" onclick="showHelpTab('advanced', event)">🎓 고급 전략</button>
      </div>

                    <!-- 기본 규칙 탭 -->
                    <div class="help-tab-content active" id="helpTabBasic">
                        <div class="help-section">
                            <h4>🎯 게임 목표</h4>
                            <p><strong>5턴에 걸쳐 정책을 선택하여 최고의 국가를 만드세요!</strong></p>
                            <ul>
                                <li>각 지표의 균형을 맞춰 높은 점수 달성</li>
                                <li>시민 만족도와 지속가능성 고려</li>
                                <li>예산 한도 내에서 효율적 운영</li>
                            </ul>
                        </div>
                        
                        <div class="help-section">
                            <h4>🎮 게임 방법</h4>
                            <ol>
                                <li><strong>국가 선택:</strong> 5개 국가 모델 중 하나 선택</li>
                                <li><strong>정책 선택:</strong> 각 턴마다 최대 2개 정책 선택</li>
                                <li><strong>예산 관리:</strong> 한정된 예산 내에서 신중한 선택</li>
                                <li><strong>결과 확인:</strong> 정책 효과와 시민 반응 체크</li>
                                <li><strong>다음 턴:</strong> 5턴 완주까지 반복</li>
                            </ol>
                        </div>

                        <div class="help-section">
                            <h4>⚖️ 핵심 개념</h4>
                            <div class="concept-grid">
                                <div class="concept-item">
                                    <strong>💰 예산 제약</strong>
                                    <p>모든 정책에는 비용이 있고, 적자 한도를 넘으면 페널티</p>
                                </div>
                                <div class="concept-item">
                                    <strong>⚡ 시너지 & 충돌</strong>
                                    <p>정책 조합에 따라 보너스나 페널티 발생</p>
                                </div>
                                <div class="concept-item">
                                    <strong>🎯 트레이드오프</strong>
                                    <p>한 지표를 올리면 다른 지표가 내려갈 수 있음</p>
                                </div>
                                <div class="concept-item">
                                    <strong>🏛️ 국가 특성</strong>
                                    <p>선택한 국가에 따라 정책 비용과 효과가 달라짐</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 지표 설명 탭 -->
                    <div class="help-tab-content" id="helpTabIndicators">
                        <div class="help-section">
                            <h4>📊 8가지 국가 지표</h4>
                            <div class="indicators-help">
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">💰</span>
                                    <div>
                                        <strong>경제</strong>
                                        <p>GDP 성장률, 고용률, 경제 활력도를 나타냄</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">🚀</span>
                                    <div>
                                        <strong>기술</strong>
                                        <p>R&D 투자, 혁신역량, 디지털화 수준</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">😊</span>
                                    <div>
                                        <strong>시민반응</strong>
                                        <p>국민 만족도, 여론조사 지지율, 사회적 신뢰</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">🌱</span>
                                    <div>
                                        <strong>환경</strong>
                                        <p>대기질, 탄소배출, 재생에너지 비율, 지속가능성</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">💼</span>
                                    <div>
                                        <strong>재정</strong>
                                        <p>정부 부채, 재정수지, 세수 안정성</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">🛡️</span>
                                    <div>
                                        <strong>안정성</strong>
                                        <p>사회질서, 정치적 안정, 제도의 신뢰성</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">❤️</span>
                                    <div>
                                        <strong>복지</strong>
                                        <p>사회보장, 의료접근성, 교육기회, 삶의 질</p>
                                    </div>
                                </div>
                                <div class="indicator-help-item">
                                    <span class="indicator-icon">🤝</span>
                                    <div>
                                        <strong>외교</strong>
                                        <p>국제관계, 대외신뢰도, 글로벌 영향력</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="help-section">
                            <h4>📈 점수 시스템</h4>
                            <ul>
                                <li><strong>범위:</strong> 각 지표는 -5부터 +5까지</li>
                                <li><strong>총점:</strong> 8개 지표의 합계 (최대 40점)</li>
                                <li><strong>등급:</strong> S급(25점+) > A급(15점+) > B급(5점+) > C급(-5점+) > D급(-15점+) > F급</li>
                            </ul>
                        </div>
                    </div>

                    <!-- 국가 특성 탭 -->
                    <div class="help-tab-content" id="helpTabNations">
                        <div class="help-section">
                            <h4>🏛️ 5가지 국가 모델</h4>
                            <div class="nations-help">
                                <div class="nation-help-item">
                                    <div class="nation-help-header">
                                        <span class="nation-icon">🏥</span>
                                        <strong>복지 강국</strong>
                                        <span class="difficulty easy">★☆☆</span>
                                    </div>
                                    <p><strong>특징:</strong> 복지 정책 15% 할인, 적자 허용도 높음</p>
                                    <p><strong>모델:</strong> 덴마크, 스웨덴, 노르웨이</p>
                                    <p><strong>전략:</strong> 안정적 예산 운용으로 초보자에게 적합</p>
                                </div>
                                
                                <div class="nation-help-item">
                                    <div class="nation-help-header">
                                        <span class="nation-icon">⛏️</span>
                                        <strong>자원 풍부국</strong>
                                        <span class="difficulty medium">★★☆</span>
                                    </div>
                                    <p><strong>특징:</strong> 경제 정책 효과 20% 증가</p>
                                    <p><strong>모델:</strong> 노르웨이, 사우디, 칠레</p>
                                    <p><strong>전략:</strong> 경제 중심 정책으로 성장 동력 확보</p>
                                </div>
                                
                                <div class="nation-help-item">
                                    <div class="nation-help-header">
                                        <span class="nation-icon">🚀</span>
                                        <strong>기술 선진국</strong>
                                        <span class="difficulty hard">★★★</span>
                                    </div>
                                    <p><strong>특징:</strong> 기술/교육 정책 20% 할인, 시민 신뢰도 낮음</p>
                                    <p><strong>모델:</strong> 실리콘밸리, 이스라엘, 핀란드</p>
                                    <p><strong>전략:</strong> 시민 반응 관리가 핵심</p>
                                </div>
                                
                                <div class="nation-help-item">
                                    <div class="nation-help-header">
                                        <span class="nation-icon">📈</span>
                                        <strong>신흥 개발국</strong>
                                        <span class="difficulty medium">★★☆</span>
                                    </div>
                                    <p><strong>특징:</strong> 균형잡힌 성장 기회, 제한적 예산</p>
                                    <p><strong>모델:</strong> 한국, 싱가포르, 대만</p>
                                    <p><strong>전략:</strong> 전략적 선택과 집중 필요</p>
                                </div>
                                
                                <div class="nation-help-item">
                                    <div class="nation-help-header">
                                        <span class="nation-icon">🔥</span>
                                        <strong>위기국가</strong>
                                        <span class="difficulty hard">★★★</span>
                                    </div>
                                    <p><strong>특징:</strong> 긴급정책 접근 가능, 극한 도전</p>
                                    <p><strong>모델:</strong> 전후 재건 국가들</p>
                                    <p><strong>전략:</strong> 생존이 우선, 진정한 하드모드</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 게임 팁 탭 -->
                    <div class="help-tab-content" id="helpTabTips">
                        <div class="help-section">
                            <h4>💡 초보자 팁</h4>
                            <ul>
                                <li><strong>예산 먼저:</strong> 항상 다음 턴 예산을 고려해서 선택</li>
                                <li><strong>균형이 핵심:</strong> 한 분야만 올리지 말고 고르게 발전</li>
                                <li><strong>시민 반응 체크:</strong> 정책 확정 후 밈 반응을 확인</li>
                                <li><strong>국가 특성 활용:</strong> 할인 받는 정책을 적극 활용</li>
                                <li><strong>충돌 피하기:</strong> 정책 설명에서 충돌 정책 확인</li>
                            </ul>
                        </div>
                        
                        <div class="help-section">
                            <h4>⚡ 시너지 조합 예시</h4>
                            <div class="synergy-examples">
                                <div class="synergy-item">
                                    <strong>🌱 친환경 성장</strong>
                                    <p>탄소세 도입 + 재생에너지 투자 + 중소기업 지원</p>
                                </div>
                                <div class="synergy-item">
                                    <strong>❤️ 복지 혁신</strong>
                                    <p>기본소득 도입 + 의료 인프라 확충 + 디지털 세금 도입</p>
                                </div>
                                <div class="synergy-item">
                                    <strong>🚀 기술 교육</strong>
                                    <p>디지털 교육 확대 + 기술 협력 확대 + 평생학습 확대</p>
                                </div>
                            </div>
                        </div>

                        <div class="help-section">
                            <h4>⚠️ 흔한 실수들</h4>
                            <ul>
                                <li>예산 무시하고 비싼 정책만 선택</li>
                                <li>한 분야에만 집중해서 다른 지표 방치</li>
                                <li>정책 간 충돌 관계 무시</li>
                                <li>단기 인기에만 매몰된 선택</li>
                                <li>국가별 특성을 활용하지 않음</li>
                            </ul>
                        </div>
                    </div>

                    <!-- 고급 전략 탭 -->
                    <div class="help-tab-content" id="helpTabAdvanced">
                        <div class="help-section">
                            <h4>🎓 고급 전략</h4>
                            <ul>
                                <li><strong>메타 분석:</strong> 각 턴마다 전체 그림을 그려보기</li>
                                <li><strong>기회비용 고려:</strong> 선택하지 않은 정책의 가치도 생각</li>
                                <li><strong>장기적 관점:</strong> 5턴 후를 내다보는 전략 수립</li>
                                <li><strong>위기 관리:</strong> 마이너스 지표를 어떻게 회복시킬지 계획</li>
                                <li><strong>이벤트 대비:</strong> 예상치 못한 이벤트에 대한 대응력</li>
                            </ul>
                        </div>

                        <div class="help-section">
                            <h4>🏆 고득점 전략</h4>
                            <div class="strategy-tips">
                                <div class="strategy-item">
                                    <strong>S급 달성 (25점+)</strong>
                                    <p>모든 지표를 양수로 유지하면서 시너지 조합 활용</p>
                                </div>
                                <div class="strategy-item">
                                    <strong>효율성 극대화</strong>
                                    <p>국가별 할인 혜택을 최대한 활용하여 예산 절약</p>
                                </div>
                                <div class="strategy-item">
                                    <strong>밸런스 전략</strong>
                                    <p>극단적 선택보다는 안정적 균형 발전 추구</p>
                                </div>
                            </div>
                        </div>

                        <div class="help-section">
                            <h4>📚 실제 정치학 개념</h4>
                            <ul>
                                <li><strong>트레이드오프:</strong> 모든 선택에는 기회비용이 존재</li>
                                <li><strong>파레토 효율:</strong> 누군가의 손해 없이는 개선 불가능한 상태</li>
                                <li><strong>외부효과:</strong> 정책이 의도치 않은 다른 영역에 미치는 영향</li>
                                <li><strong>공공선택론:</strong> 정치인도 자신의 이익을 추구하는 합리적 행위자</li>
                                <li><strong>정부실패:</strong> 시장실패를 해결하려다 더 큰 비효율 발생</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 정책 도움말 팝업 -->
        <div id="policyHelpPopup" class="popup-overlay">
            <div class="popup-content">
                <div class="popup-header">
                    <h3>💡 정책 도움말</h3>
                    <button class="close-btn" onclick="closePolicyHelp()">✖</button>
                </div>
                <div class="popup-body" id="policyHelpContent">
                    <!-- 현재 카테고리 정책 설명 -->
                </div>
            </div>
        </div>

        <!-- 크레딧 팝업 -->
        <div id="creditsPopup" class="popup-overlay">
            <div class="popup-content">
                <div class="popup-header">
                    <h3>👥 크레딧</h3>
                    <button class="close-btn" onclick="closeCredits()">✖</button>
                </div>
                <div class="popup-body">
                    <div class="credits-section">
                        <h4>🎮 게임 개발</h4>
                        <p>픽셀 정치 시뮬레이터 - 국가를 설계하라</p>
                        <p>교육용 정치 시뮬레이션 게임</p>
                    </div>
                    <div class="credits-section">
                        <h4>🎨 디자인 컨셉</h4>
                        <p>레트로 픽셀아트 스타일</p>
                        <p>8비트 게임 오마주</p>
                    </div>
                    <div class="credits-section">
                        <h4>📚 교육적 목표</h4>
                        <p>정치학 및 공공정책 학습</p>
                        <p>복잡한 사회 문제 이해</p>
                        <p>정책 트레이드오프 체험</p>
                    </div>
                    <div class="credits-section">
                        <h4>🛠️ 기술 스택</h4>
                        <p>HTML5, CSS3, JavaScript</p>
                        <p>순수 웹 기술로 구현</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 상태 표시 바 -->
    <div class="status-bar">
        <div class="status-item">🎮 픽셀 정치 시뮬레이터 v2.0</div>
        <div class="status-item" id="gameStatus">대기 중...</div>
        <div class="status-item" id="systemStatus">시스템 정상</div>
        <div class="status-item" id="debugInfo" style="display: none;">디버그 모드</div>
    </div>

    <!-- 알림 컨테이너 -->
    <div id="notificationContainer" class="notification-container">
        <!-- 토스트 알림들이 여기에 표시됩니다 -->
    </div>

    <!-- JavaScript 파일들 -->
    <script src="js/data.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
        
    <!-- 이벤트 팝업 -->
<div id="eventPopup" class="popup-overlay">
    <div class="popup-content">
        <div class="popup-header">
            <h3 id="eventTitle">🎯 이벤트 발생!</h3>
            <button class="close-btn" onclick="hidePopup('eventPopup')">✖</button>
        </div>
        <div class="popup-body">
            <div id="eventDescription" style="margin-bottom: 1rem; font-size: 1rem; line-height: 1.5;">
                이벤트 설명이 여기에 표시됩니다.
            </div>
            <div class="event-effects" id="eventEffects" style="background: rgba(255, 107, 157, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <strong>즉시 효과:</strong><br>
                효과 내용이 여기에 표시됩니다.
            </div>
            <div class="event-choices" id="eventChoices" style="display: flex; flex-direction: column; gap: 0.5rem;">
                <!-- 선택지 버튼들이 여기에 동적으로 생성됩니다 -->
            </div>
        </div>
    </div>
</div>
</body>
</html>






