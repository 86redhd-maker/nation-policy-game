// 게임 데이터 - 모든 JSON 데이터를 JavaScript 객체로 변환

// 국가 데이터 (nations.json 기반)
const NATIONS_DATA = {
  "복지 강국": {
    "description": "복지 수준이 높지만 재정 부담과 제도 피로도가 존재함",
    "difficulty": "하",
    "difficulty_stars": 1,
    "initial_budget": 100,
    "debt_limit": -70,
    "budget_description": "안정적인 복지 시스템으로 예산 운용 경험이 풍부. 적자 허용도 높음",
    "initialIndicators": {
      "경제": 0, "기술": 1, "시민 반응": 2, "환경": 1,
      "재정": -2, "안정성": 1, "복지": 3, "외교": 1
    },
    "special_features": [
      "복지 정책 비용 -15% (기존 시스템 효율성)",
      "경제 정책 비용 +10% (높은 노동 비용)",
      "재정 적자 페널티 -30% (높은 사회적 수용도)"
    ],
    "flag_colors": ["#ff6b6b", "#4ecdc4"]
  },
  "자원 풍부국": {
    "description": "자원이 풍부하지만 환경 갈등이 잦고 산업 의존도가 높음",
    "difficulty": "중",
    "difficulty_stars": 2,
    "initial_budget": 90,
    "debt_limit": -40,
    "budget_description": "자원 수출로 안정적 수입이 있지만 환경 투자 압박으로 예산 여유 적음",
    "initialIndicators": {
      "경제": 2, "기술": 0, "시민 반응": 0, "환경": -1,
      "재정": 1, "안정성": 0, "복지": 0, "외교": 1
    },
    "special_features": [
      "환경 정책 비용 +10% (환경 갈등으로 인한 추가 비용)",
      "경제 정책 효과 +20% (자원 기반 경제의 높은 반응성)"
    ],
    "flag_colors": ["#f39c12", "#27ae60"]
  },
  "기술 선진국": {
    "description": "기술력이 뛰어나지만 시민 신뢰도가 낮고 윤리 갈등이 존재함",
    "difficulty": "상",
    "difficulty_stars": 3,
    "initial_budget": 110,
    "debt_limit": -60,
    "budget_description": "높은 기술력으로 풍부한 예산이지만 복잡한 사회 문제 해결에 높은 비용 필요",
    "initialIndicators": {
      "경제": 1, "기술": 3, "시민 반응": -2, "환경": 0,
      "재정": 1, "안정성": 0, "복지": 0, "외교": 1
    },
    "special_features": [
      "기술/교육 정책 비용 -20% (기존 인프라 활용 가능)",
      "복지 정책 비용 +30% (높은 사회적 기대 수준)",
      "AI 윤리 관련 이벤트 확률 +50%"
    ],
    "flag_colors": ["#9b59b6", "#3498db"]
  },
  "신흥 개발국": {
    "description": "성장 중인 국가로 인프라 부족과 사회 불균형이 문제",
    "difficulty": "중",
    "difficulty_stars": 2,
    "initial_budget": 85,
    "debt_limit": -35,
    "budget_description": "제한적 예산으로 모든 분야에 균등 투자가 어려움. 전략적 선택 필수",
    "initialIndicators": {
      "경제": 2, "기술": 1, "시민 반응": -1, "환경": -1,
      "재정": 0, "안정성": -1, "복지": -1, "외교": 0
    },
    "special_features": [
      "모든 정책 비용 기본값 적용",
      "경제 성장 관련 이벤트 확률 +30%",
      "빈부격차 관련 이벤트 확률 +40%"
    ],
    "flag_colors": ["#e74c3c", "#f1c40f"]
  },
  "위기국가": {
    "description": "정치·사회·경제 모두 불안정한 상태에서 재건이 필요한 국가",
    "difficulty": "상",
    "difficulty_stars": 3,
    "initial_budget": 70,
    "debt_limit": -25,
    "budget_description": "극도로 제한된 예산. 모든 선택이 생존과 직결됨. 진정한 하드모드",
    "initialIndicators": {
      "경제": -2, "기술": -1, "시민 반응": -3, "환경": -1,
      "재정": -2, "안정성": -3, "복지": -1, "외교": -1
    },
    "special_features": [
      "위기국가 전용 긴급정책 접근 가능",
      "모든 정책 비용 +20% (하지만 긴급정책은 할인)",
      "적자 허용도 낮음 (-25pt만 허용)",
      "재건 관련 특별 이벤트 확률 +60%",
      "국제 원조 관련 이벤트 확률 +40%"
    ],
    "flag_colors": ["#2c3e50", "#e74c3c"]
  }
};

// 정책 데이터 (policies.json 기반)
const POLICIES_DATA = {
  "복지": [
    {
      "정책명": "기본소득 도입",
      "비용": 30,
      "효과": {"복지": 15, "경제": -8, "재정": -12},
      "요구조건": {"재정": 0},
      "충돌정책": ["의료 인프라 확충"],
      "시너지정책": ["디지털 세금 도입"],
      "정책_설명": "모든 국민에게 월 기본 생활비를 지급하는 혁신적 복지 제도",
      "예상_시민반응": "월급은 그대로인데 세금이 두 배야 💸😭"
    },
    {
      "정책명": "의료 인프라 확충",
      "비용": 25,
      "효과": {"복지": 12, "경제": -5, "재정": -8},
      "요구조건": {"경제": -1},
      "충돌정책": ["기본소득 도입"],
      "시너지정책": ["노인 복지 강화"],
      "정책_설명": "병원 증설과 의료진 확충으로 의료 접근성 대폭 개선",
      "예상_시민반응": "이제 병원 예약이 3일 안에 돼요! 기적이다 🏥✨"
    },
    {
      "정책명": "공공주택 확대",
      "비용": 20,
      "효과": {"복지": 10, "환경": -3, "재정": -6},
      "요구조건": {"시민 반응": -2},
      "충돌정책": ["도시 녹지 확대"],
      "시너지정책": ["중소기업 지원"],
      "정책_설명": "저소득층을 위한 공공임대주택 대량 공급",
      "예상_시민반응": "이젠 월세 걱정은 조금 덜해요 🏠🙂"
    },
    {
      "정책명": "노인 복지 강화",
      "비용": 15,
      "효과": {"복지": 8, "재정": -5, "시민 반응": 3},
      "요구조건": {"복지": 0},
      "충돌정책": ["청년 지원 확대"],
      "시너지정책": ["의료 인프라 확충"],
      "정책_설명": "고령화 사회에 대비한 노인 돌봄 시설 및 연금 확대",
      "예상_시민반응": "할머니가 요양비 걱정 안 해도 된대요 👵❤️"
    },
    {
      "정책명": "청년 지원 확대",
      "비용": 15,
      "효과": {"복지": 6, "경제": 4, "시민 반응": 2},
      "요구조건": {"경제": -1},
      "충돌정책": ["노인 복지 강화"],
      "시너지정책": ["디지털 교육 확대"],
      "정책_설명": "청년 창업 지원과 취업 프로그램 확대로 미래 세대 육성",
      "예상_시민반응": "취준생인데 이번엔 진짜 지원금 받았어 🎓💰"
    }
  ],
  "경제": [
    {
      "정책명": "디지털 세금 도입",
      "비용": 10,
      "효과": {"재정": 12, "경제": -3, "기술": 2},
      "요구조건": {"기술": 0},
      "충돌정책": ["대기업 감세"],
      "시너지정책": ["기본소득 도입"],
      "정책_설명": "글로벌 IT 기업들에게 디지털 서비스세 부과로 재정 확충",
      "예상_시민반응": "앱 쓰는데도 세금 내야 돼? 이건 좀… 📱💸"
    },
    {
      "정책명": "대기업 감세",
      "비용": 20,
      "효과": {"경제": 12, "재정": -8, "외교": 3},
      "요구조건": {"경제": -2},
      "충돌정책": ["디지털 세금 도입"],
      "시너지정책": ["해외 투자 유치"],
      "정책_설명": "기업 투자 활성화를 위한 법인세율 인하 및 세제 혜택",
      "예상_시민반응": "우리 회사 세금 줄었대! 근데 월급은 그대로야 😐"
    },
    {
      "정책명": "중소기업 지원",
      "비용": 15,
      "효과": {"경제": 8, "복지": 4, "시민 반응": 3},
      "요구조건": {"시민 반응": -2},
      "충돌정책": ["금융 규제 강화"],
      "시너지정책": ["공공주택 확대"],
      "정책_설명": "소상공인과 중소기업 대출 지원 및 규제 완화",
      "예상_시민반응": "동네 카페가 다시 열었어! 커피도 맛있어 ☕🎉"
    },
    {
      "정책명": "금융 규제 강화",
      "비용": 10,
      "효과": {"재정": 8, "경제": -4, "안정성": 5},
      "요구조건": {"안정성": -2},
      "충돌정책": ["중소기업 지원"],
      "시너지정책": ["디지털 세금 도입"],
      "정책_설명": "금융시스템 안정성 확보를 위한 은행 규제 및 감독 강화",
      "예상_시민반응": "은행이 대출 안 해줘요… 집은 꿈인가요 🏠😢"
    },
    {
      "정책명": "해외 투자 유치",
      "비용": 20,
      "효과": {"경제": 10, "외교": 6, "기술": 3},
      "요구조건": {"외교": 0},
      "충돌정책": ["탄소세 도입"],
      "시너지정책": ["대기업 감세"],
      "정책_설명": "외국인 투자 활성화를 위한 규제 완화 및 인센티브 제공",
      "예상_시민반응": "외국 기업 들어온다는데 우리 일자리는요? 🏭🇺🇸"
    }
  ],
  "환경": [
    {
      "정책명": "탄소세 도입",
      "비용": 15,
      "효과": {"환경": 15, "경제": -6, "외교": 4},
      "요구조건": {"외교": 0},
      "충돌정책": ["석탄 산업 보조금"],
      "시너지정책": ["재생에너지 투자"],
      "정책_설명": "온실가스 배출량에 비례한 탄소세 부과로 친환경 전환 유도",
      "예상_시민반응": "숨 쉬는 것도 돈 드는 시대… 탄소세 실화냐? 🌬️💸"
    },
    {
      "정책명": "재생에너지 투자",
      "비용": 25,
      "효과": {"환경": 12, "경제": 3, "기술": 5},
      "요구조건": {"기술": 0},
      "충돌정책": ["원자력 확대"],
      "시너지정책": ["탄소세 도입"],
      "정책_설명": "태양광, 풍력 등 재생에너지 발전소 대규모 건설",
      "예상_시민반응": "우리 동네에 태양광 패널 생겼어요! 미래 느낌 🌞🏘️"
    },
    {
      "정책명": "석탄 산업 보조금",
      "비용": 20,
      "효과": {"경제": 8, "환경": -15, "시민 반응": -3},
      "요구조건": {"경제": -2},
      "충돌정책": ["탄소세 도입"],
      "시너지정책": ["원자력 확대"],
      "정책_설명": "석탄 산업 보호와 일자리 유지를 위한 정부 지원",
      "예상_시민반응": "석탄 공장 일자리는 지켜졌는데… 공기가 😷"
    },
    {
      "정책명": "원자력 확대",
      "비용": 20,
      "효과": {"환경": 6, "안정성": -8, "경제": 4},
      "요구조건": {"기술": 1},
      "충돌정책": ["재생에너지 투자"],
      "시너지정책": ["석탄 산업 보조금"],
      "정책_설명": "안정적 전력 공급을 위한 원자력 발전소 신규 건설",
      "예상_시민반응": "전기요금 낮아진다는데… 안전은 괜찮은 거죠? ⚠️⚡"
    },
    {
      "정책명": "도시 녹지 확대",
      "비용": 10,
      "효과": {"환경": 8, "복지": 4, "시민 반응": 2},
      "요구조건": {"시민 반응": -1},
      "충돌정책": ["공공주택 확대"],
      "시너지정책": ["재생에너지 투자"],
      "정책_설명": "도시 공원 확충과 가로수 늘리기로 생활환경 개선",
      "예상_시민반응": "공원이 생겨서 산책하기 좋아졌어요! 🌳🚶‍♂️"
    }
  ],
  "교육": [
    {
      "정책명": "공교육 강화",
      "비용": 20,
      "효과": {"기술": 8, "복지": 6, "시민 반응": 4},
      "요구조건": {"복지": -1},
      "충돌정책": ["사교육 지원 확대"],
      "시너지정책": ["평생학습 확대"],
      "정책_설명": "공립학교 시설 개선과 교사 처우 향상으로 교육 질 제고",
      "예상_시민반응": "학교 수업이 재밌어졌대요! 애들이 좋아해요 🏫😊"
    },
    {
      "정책명": "디지털 교육 확대",
      "비용": 15,
      "효과": {"기술": 12, "경제": 3, "시민 반응": 2},
      "요구조건": {"기술": 0},
      "충돌정책": ["전통 교육 강화"],
      "시너지정책": ["평생학습 확대"],
      "정책_설명": "AI, 코딩 등 미래 기술 교육과 디지털 기기 보급",
      "예상_시민반응": "태블릿으로 수업하니까 신기해요! 📱📚"
    },
    {
      "정책명": "평생학습 확대",
      "비용": 10,
      "효과": {"기술": 6, "복지": 4, "경제": 2},
      "요구조건": {"복지": 0},
      "충돌정책": [],
      "시너지정책": ["공교육 강화", "디지털 교육 확대"],
      "정책_설명": "성인 재교육 프로그램과 온라인 학습 플랫폼 구축",
      "예상_시민반응": "60세에 대학 다니는 할아버지 멋져요! 👨‍🎓✨"
    },
    {
      "정책명": "사교육 지원 확대",
      "비용": 15,
      "효과": {"기술": 8, "복지": -4, "시민 반응": -2},
      "요구조건": {"시민 반응": -2},
      "충돌정책": ["공교육 강화"],
      "시너지정책": [],
      "정책_설명": "학원비 지원과 사교육 시장 활성화 정책",
      "예상_시민반응": "학원비 지원 나와서 다행이에요! 📚💰"
    },
    {
      "정책명": "전통 교육 강화",
      "비용": 10,
      "효과": {"안정성": 6, "기술": -3, "시민 반응": 3},
      "요구조건": {"안정성": -1},
      "충돌정책": ["디지털 교육 확대"],
      "시너지정책": [],
      "정책_설명": "인문학과 전통 문화 교육 비중 확대",
      "예상_시민반응": "서예 수업이 다시 생겼어요! 옛날 감성 좋아 ✍️📜"
    }
  ],
  "외교": [
    {
      "정책명": "국제 협약 참여",
      "비용": 10,
      "효과": {"외교": 12, "환경": 6, "경제": -2},
      "요구조건": {"외교": 0},
      "충돌정책": ["무역 자율화"],
      "시너지정책": ["탄소세 도입"],
      "정책_설명": "기후변화, 인권 등 국제 협약 적극 참여로 국가 신뢰도 제고",
      "예상_시민반응": "다른 나라랑 손잡고 문제 푸는 거, 보기 좋아요 🤝🌍"
    },
    {
      "정책명": "무역 자율화",
      "비용": 15,
      "효과": {"경제": 10, "외교": 8, "환경": -3},
      "요구조건": {"경제": 0},
      "충돌정책": ["국제 협약 참여"],
      "시너지정책": ["해외 투자 유치"],
      "정책_설명": "관세 철폐와 자유무역협정 확대로 경제 개방",
      "예상_시민반응": "수입 물건이 저렴해졌어요! 쇼핑 재미 UP 🛒💰"
    },
    {
      "정책명": "군사 동맹 강화",
      "비용": 20,
      "효과": {"외교": 8, "안정성": 6, "재정": -8},
      "요구조건": {"안정성": -2},
      "충돌정책": ["중립 외교 강화"],
      "시너지정책": ["기술 협력 확대"],
      "정책_설명": "동맹국과의 군사 협력 강화 및 합동 훈련 확대",
      "예상_시민반응": "우리 군대 강해진다니 든든해요 💪🇰🇷"
    },
    {
      "정책명": "중립 외교 강화",
      "비용": 10,
      "효과": {"외교": 6, "안정성": 4, "경제": 3},
      "요구조건": {"안정성": 0},
      "충돌정책": ["군사 동맹 강화"],
      "시너지정책": ["국제 협약 참여"],
      "정책_설명": "모든 국가와 균형잡힌 관계 유지하는 중립 외교",
      "예상_시민반응": "어느 편도 안 들고 평화롭게 지내는 거 좋아요 🕊️☮️"
    },
    {
      "정책명": "기술 협력 확대",
      "비용": 15,
      "효과": {"외교": 6, "기술": 8, "경제": 4},
      "요구조건": {"기술": 0},
      "충돌정책": [],
      "시너지정책": ["디지털 교육 확대", "군사 동맹 강화"],
      "정책_설명": "선진국과의 기술 교류 및 공동 연구 프로젝트 확대",
      "예상_시민반응": "외국 기술자들과 함께 일하니까 배울 게 많아요! 👨‍💻🌍"
    }
  ]
};

// 게임 설정 (game_config.json 기반)
const GAME_CONFIG = {
  "total_turns": 5,
  "policies_per_turn": 2,
  "category_order": ["복지", "경제", "환경", "교육", "외교"],
  "max_indicator_value": 5,
  "min_indicator_value": -5
};

// 지표 정보
const INDICATORS_INFO = {
  "경제": { 
    "name": "💰 경제", 
    "description": "국가의 경제 상황",
    "color": "#ffaa00"
  },
  "기술": { 
    "name": "🚀 기술", 
    "description": "과학기술 발전 수준",
    "color": "#00aaff"
  },
  "시민 반응": { 
    "name": "😊 시민반응", 
    "description": "국민들의 만족도",
    "color": "#ff6666"
  },
  "환경": { 
    "name": "🌱 환경", 
    "description": "환경 보호 수준",
    "color": "#00ff88"
  },
  "재정": { 
    "name": "💼 재정", 
    "description": "국가 재정 건전성",
    "color": "#ffcc00"
  },
  "안정성": { 
    "name": "🛡️ 안정성", 
    "description": "사회 안정 정도",
    "color": "#8888ff"
  },
  "복지": { 
    "name": "❤️ 복지", 
    "description": "사회 복지 수준",
    "color": "#ff88aa"
  },
  "외교": { 
    "name": "🤝 외교", 
    "description": "국제 관계 상태",
    "color": "#88aaff"
  }
};

// 밈 반응 데이터 (meme_templates.json 기반)
const MEME_REACTIONS = {
  "기본소득 도입": {
    "기본": [
      "월급은 그대로인데 세금이 두 배야 💸😭",
      "그래도 이제 병원비 걱정은 없어요 🙏",
      "기본소득 나왔는데 물가도 같이 올랐어... 🛒📈"
    ],
    "충돌": {
      "의료 인프라 확충": [
        "복지는 좋아졌는데… 나라가 망할까 봐 무서워요 😰",
        "이 조합은 너무 무리예요. 전문가들도 걱정하던데 🤯"
      ]
    },
    "시너지": {
      "디지털 세금 도입": [
        "디지털 세금 덕분에 기본소득이 진짜 가능해졌어요! 💡💰",
        "이 조합은 진짜 혁신이에요. 살기 좋아졌어요 🙌"
      ]
    }
  },
  "의료 인프라 확충": {
    "기본": [
      "이제 병원 예약이 3일 안에 돼요! 기적이다 🏥✨",
      "응급실이 더 빨라졌어요. 생명은 소중하니까요 🚑❤️",
      "MRI 기다리는 시간이 반으로 줄었어요! 👍"
    ]
  },
  "디지털 세금 도입": {
    "기본": [
      "앱 쓰는데도 세금 내야 돼? 이건 좀… 📱💸",
      "디지털 기업도 세금 내는 시대가 왔다 💻💰",
      "넷플릭스 요금에 세금 추가라니... 😅"
    ]
  },
  "탄소세 도입": {
    "기본": [
      "숨 쉬는 것도 돈 드는 시대… 탄소세 실화냐? 🌬️💸",
      "환경은 지켜야지! 근데 물가도 같이 오르면 힘들어요 😓🌍",
      "기름값이 또 올랐어요... 탄소세 때문에 ⛽💔"
    ]
  },
  "재생에너지 투자": {
    "기본": [
      "우리 동네에 태양광 패널 생겼어요! 미래 느낌 🌞🏘️",
      "전기요금은 그대로인데 환경은 좋아졌대요! ⚡🌿",
      "풍력발전기 돌아가는 거 보니까 뿌듯해요 🌀💚"
    ]
  },
  "공교육 강화": {
    "기본": [
      "학교 수업이 재밌어졌대요! 애들이 좋아해요 🏫😊",
      "선생님도 바뀌고 교재도 새로워졌어요! 변화 실감 중 📘✨",
      "방과후 수업이 알차졌어요! 학원 안 가도 될 듯 📚"
    ]
  },
  "디지털 교육 확대": {
    "기본": [
      "태블릿으로 수업하니까 신기해요! 📱📚",
      "코딩 수업이 재밌대요! 미래가 밝아 보여 💻✨",
      "온라인 강의 덕분에 집에서도 공부해요 🏠📺"
    ]
  },
  "국제 협약 참여": {
    "기본": [
      "다른 나라랑 손잡고 문제 푸는 거, 보기 좋아요 🤝🌍",
      "외교로 해결하니 전쟁 걱정은 줄었어요 🙏🕊️",
      "국제 회의에서 우리나라 발언권 늘었대요! 🗣️🌐"
    ]
  },
  "중소기업 지원": {
    "기본": [
      "동네 카페가 다시 열었어! 커피도 맛있어 ☕🎉",
      "소상공인도 숨통 트였대요. 이건 진짜 도움 🙌",
      "창업 지원금 받아서 치킨집 차렸어요! 🍗💪"
    ]
  },
  "턴 스킵": [
    "정부가 아무것도 안 하네요... 🤷‍♂️",
    "이번 달 정책 발표 없음. 휴가중인가? 🏖️",
    "아무 결정도 못 내리는 정부 ㅠㅠ 😞",
    "정치 공백 상태... 불안해요 😰"
  ]
};

// 이벤트 데이터 (events_detailed.json 기반)
const EVENTS_DATA = {
  "복지 강국": [
    {
      "id": "deficit_crisis",
      "title": "재정 적자 위기 경보",
      "description": "복지 지출 폭증으로 국가 부채가 위험 수준에 도달하며 경제 전문가들이 긴급 경고를 발령했다.",
      "effects": {
        "재정": -12,
        "경제": -6,
        "시민 반응": -4,
        "외교": -3
      },
      "choices": {
        "복지 축소": { "재정": 10, "복지": -8, "시민 반응": -6 },
        "세금 대폭 인상": { "재정": 8, "경제": -6, "시민 반응": -4 },
        "국채 발행": { "재정": 6, "경제": -3, "외교": -2 }
      }
    },
    {
      "id": "welfare_innovation",
      "title": "복지 혁신 모델 성공",
      "description": "AI와 빅데이터를 활용한 맞춤형 복지 시스템이 성공하며 전 세계의 벤치마킹 대상이 되었다.",
      "effects": {
        "복지": 10,
        "기술": 8,
        "외교": 6,
        "시민 반응": 5
      },
      "choices": {
        "모델 확산": { "복지": 6, "재정": -4 },
        "기술 수출": { "외교": 8, "경제": 6 },
        "지속 개선": { "기술": 6, "시민 반응": 4 }
      }
    },
    {
      "id": "aging_shock",
      "title": "초고령화 쇼크",
      "description": "급속한 고령화로 복지 수요가 폭증하고 생산가능인구가 급감하며 사회 시스템이 위기에 처했다.",
      "effects": {
        "복지": -8,
        "경제": -10,
        "재정": -12,
        "시민 반응": -6
      },
      "choices": {
        "이민 정책 완화": { "경제": 8, "시민 반응": -4, "외교": 3 },
        "출산 장려 정책": { "복지": 4, "재정": -6, "시민 반응": 2 },
        "자동화 가속화": { "기술": 10, "경제": 6, "시민 반응": -3 }
      }
    }
  ],
  "자원 풍부국": [
    {
      "id": "resource_boom",
      "title": "자원 가격 폭등",
      "description": "국제 원자재 시장에서 자원 가격이 급등하며 수출 수익이 크게 증가했다.",
      "effects": {
        "경제": 8,
        "재정": 12
      },
      "choices": {
        "기술 투자": { "기술": 6, "경제": 2 },
        "복지 확대": { "복지": 8, "시민 반응": 4 },
        "자원 비축": { "재정": 5, "안정성": 3 }
      }
    },
    {
      "id": "env_pressure",
      "title": "환경 단체 압박",
      "description": "국내외 환경 단체들이 자원 개발 중단을 요구하며 대규모 시위를 벌이고 있다.",
      "effects": {
        "환경": 6,
        "경제": -8,
        "시민 반응": -5
      },
      "choices": {
        "환경 정책 강화": { "환경": 10, "경제": -4 },
        "개발 계속 진행": { "경제": 6, "시민 반응": -8 },
        "협상 테이블": { "시민 반응": 3, "외교": 2 }
      }
    }
  ],
  "기술 선진국": [
    {
      "id": "ai_ethics",
      "title": "AI 윤리 논란 폭발",
      "description": "AI가 채용·감시 등에 광범위하게 활용되며 시민들의 강력한 반발이 일어나고 있다.",
      "effects": {
        "시민 반응": -10,
        "기술": -6,
        "안정성": -4
      },
      "choices": {
        "AI 규제 강화": { "시민 반응": 8, "기술": -3 },
        "투명성 확보": { "시민 반응": 4, "외교": 3 },
        "현상 유지": { "경제": 3, "시민 반응": -5 }
      }
    },
    {
      "id": "tech_breakthrough",
      "title": "혁신 기술 개발 성공",
      "description": "국가 연구진이 차세대 핵심 기술 개발에 성공하며 전 세계의 주목을 받고 있다.",
      "effects": {
        "기술": 15,
        "경제": 8,
        "외교": 6,
        "시민 반응": 5
      },
      "choices": {
        "기술 상용화": { "경제": 10, "재정": 6 },
        "추가 연구 투자": { "기술": 8, "재정": -4 },
        "국제 협력": { "외교": 8, "기술": 3 }
      }
    }
  ],
  "신흥 개발국": [
    {
      "id": "economic_miracle",
      "title": "급성장 기적 달성",
      "description": "혁신적인 정책과 국제 투자가 결합되어 예상을 뛰어넘는 경제 성장을 달성했다.",
      "effects": {
        "경제": 12,
        "시민 반응": 8,
        "외교": 6,
        "재정": 10
      },
      "choices": {
        "성장 가속화": { "경제": 8, "환경": -6 },
        "균형 발전": { "복지": 6, "환경": 3 },
        "미래 투자": { "기술": 10, "재정": -4 }
      }
    },
    {
      "id": "wealth_gap",
      "title": "빈부 격차 사회적 폭발",
      "description": "상위 1%와 하위 50%의 소득 격차가 극한에 달하며 전국적인 대규모 시위와 폭동이 발생했다.",
      "effects": {
        "시민 반응": -15,
        "복지": -8,
        "안정성": -10,
        "경제": -6
      },
      "choices": {
        "긴급 복지 확대": { "복지": 12, "시민 반응": 8, "재정": -12 },
        "세제 개혁 단행": { "재정": 8, "시민 반응": 4, "경제": -4 },
        "강경 진압": { "안정성": 6, "시민 반응": -8, "외교": -4 }
      }
    }
  ],
  "위기국가": [
    {
      "id": "foreign_aid_offer",
      "title": "국제 대규모 원조 제안",
      "description": "UN과 주요 선진국들이 총 100억 달러 규모의 긴급 구호와 재건 지원을 제안했다.",
      "effects": {
        "외교": 8,
        "재정": 15,
        "경제": 6
      },
      "choices": {
        "조건 없는 수용": { "재정": 10, "외교": 4, "안정성": -2 },
        "조건부 수용": { "재정": 6, "외교": 6, "안정성": 2 },
        "자주적 거부": { "안정성": 4, "시민 반응": 3, "외교": -6 }
      }
    },
    {
      "id": "civil_unrest",
      "title": "전국적 시민 봉기",
      "description": "정부 정책에 대한 누적된 불만이 폭발하며 수도를 포함한 전국에서 대규모 시위와 폭동이 확산되고 있다.",
      "effects": {
        "시민 반응": -12,
        "안정성": -10,
        "경제": -8,
        "외교": -4
      },
      "choices": {
        "대화와 타협": { "시민 반응": 10, "안정성": 6, "복지": 4 },
        "개혁 약속": { "시민 반응": 8, "복지": 6, "재정": -4 },
        "비상사태 선포": { "안정성": 8, "시민 반응": -8, "외교": -6 }
      }
    },
    {
      "id": "reconstruction_miracle",
      "title": "재건 프로젝트 대성공",
      "description": "정부의 대규모 인프라 재건 계획이 예상을 뛰어넘는 성과를 거두며 국민들의 희망이 되살아나고 있다.",
      "effects": {
        "경제": 15,
        "안정성": 12,
        "시민 반응": 10,
        "복지": 6
      },
      "choices": {
        "추가 투자 확대": { "경제": 8, "재정": -8 },
        "안정적 운영": { "안정성": 6, "시민 반응": 4 },
        "성공 모델 확산": { "외교": 6, "기술": 4 }
      }
    }
  ]
};

// 예산 페널티 시스템 (game_config.json 기반)
const BUDGET_PENALTIES = {
  "light_debt": {
    "range": [0, -20],
    "effects": { "재정": -1 },
    "message": "약간의 적자가 발생했습니다 💸",
    "citizen_reaction": "빚이 조금 생겼네요... 괜찮을까요? 😅"
  },
  "moderate_debt": {
    "range": [-21, -40],
    "effects": { "재정": -2, "시민 반응": -1 },
    "message": "재정 적자가 심각해지고 있습니다 😰",
    "citizen_reaction": "나라 빚이 많아지고 있어요... 걱정돼요 😟"
  },
  "severe_debt": {
    "range": [-41, -70],
    "effects": { "재정": -3, "시민 반응": -2, "안정성": -1 },
    "message": "국가 재정 위기 상황입니다! 🚨",
    "citizen_reaction": "이러다 나라가 망하는 거 아니에요?! 😱"
  },
  "critical_debt": {
    "range": [-71, -999],
    "effects": { "재정": -4, "시민 반응": -3, "안정성": -2, "경제": -1 },
    "message": "국가 부도 위험! 긴급 조치가 필요합니다! 🔥",
    "citizen_reaction": "정부가 파산하는 건가요?! 😭💸"
  }
};

// 엔딩 시스템 (endings.json 기반)
const ENDINGS_DATA = {
  "S급": {
    "title": "🏆 완벽한 국가",
    "description": "모든 분야에서 균형잡힌 발전을 이뤄낸 당신은 진정한 국가 설계의 대가입니다.",
    "requirements": { "total_score": 25, "min_indicator": 0 },
    "citizen_reaction": "🎉 역사상 최고의 지도자! 우리 나라가 세계의 모델이 됐어요!",
    "achievement": "완벽한 설계자"
  },
  "A급": {
    "title": "🌟 번영하는 국가", 
    "description": "대부분의 분야에서 우수한 성과를 거두었습니다.",
    "requirements": { "total_score": 15 },
    "citizen_reaction": "👏 정말 살기 좋은 나라가 됐어요! 감사합니다!",
    "achievement": "번영의 건축가"
  },
  "B급": {
    "title": "⚖️ 균형잡힌 국가",
    "description": "완벽하지는 않지만 전반적으로 안정적인 국가를 만들어냈습니다.",
    "requirements": { "total_score": 5 },
    "citizen_reaction": "😊 예전보다 확실히 나아졌어요. 희망이 보여요!",
    "achievement": "균형의 달인"
  },
  "C급": {
    "title": "🌱 발전 중인 국가",
    "description": "아직 갈 길이 멀지만 변화의 기초를 다졌습니다.",
    "requirements": { "total_score": -5 },
    "citizen_reaction": "🤔 완전히 좋아진 건 아니지만... 변화는 느껴져요",
    "achievement": "희망의 씨앗"
  },
  "D급": {
    "title": "⛈️ 어려운 상황",
    "description": "많은 어려움이 있었지만 최악의 상황은 피했습니다.",
    "requirements": { "total_score": -15 },
    "citizen_reaction": "😟 힘들긴 하지만... 그래도 더 나빠지지는 않았네요",
    "achievement": "시련의 항해사"
  },
  "F급": {
    "title": "💥 국가 위기",
    "description": "정책 선택에 문제가 있어 국가가 심각한 위기에 빠졌습니다.",
    "requirements": { "total_score": -999 },
    "citizen_reaction": "😡 이게 뭔가요... 우리 나라가 이렇게 될 줄이야...",
    "achievement": "혼돈의 목격자"
  }
};

// 특별 엔딩 (endings.json 기반)
const SPECIAL_ENDINGS = {
  "환경_지키미": {
    "title": "🌍 환경 모범 국가!",
    "description": "환경 보호에 최우선으로 투자한 결과, 전 세계가 주목하는 친환경 국가가 되었습니다.",
    "requirements": { "환경": 3, "환경_정책_count": 3 },
    "citizen_reaction": "🌿 우리가 지구를 구하고 있어요! 자랑스러워요!",
    "achievement": "지구의 수호자"
  },
  "기술_혁신가": {
    "title": "🚀 기술 강국 도약!",
    "description": "첨단 기술 발전에 집중한 결과, 세계를 선도하는 기술 강국이 되었습니다.",
    "requirements": { "기술": 4, "기술_정책_count": 3 },
    "citizen_reaction": "💻 우리나라 기술이 세계 최고래요! 미래가 기대돼요!",
    "achievement": "미래의 개척자"
  },
  "복지_천국": {
    "title": "❤️ 시민이 행복한 나라!",
    "description": "시민의 행복을 최우선으로 한 정책들이 결실을 맺어 모든 국민이 만족하는 복지 천국을 만들었습니다.",
    "requirements": { "복지": 4, "시민 반응": 2, "복지_정책_count": 4 },
    "citizen_reaction": "😍 이런 나라에서 살 수 있어서 정말 행복해요!",
    "achievement": "복지의 아버지"
  },
  "재건의_설계자": {
    "title": "🔥 불사조의 부활!",
    "description": "최악의 상황에서 시작해 국가를 완전히 재건해낸 당신은 진정한 기적을 만들어냈습니다.",
    "requirements": { "nation": "위기국가", "total_score": 10 },
    "citizen_reaction": "😭 정말 기적이에요! 당신 덕분에 희망을 되찾았어요!",
    "achievement": "재건의 설계자"
  }
};

// 정책 조합 분석 (endings.json 기반)
const POLICY_COMBINATIONS = {
  "친환경_성장": {
    "required_policies": ["탄소세 도입", "재생에너지 투자", "중소기업 지원"],
    "bonus_effects": { "환경": 5, "경제": 3, "외교": 2 },
    "evaluation": "환경과 경제의 완벽한 조화! 지속가능한 발전의 모범 사례입니다.",
    "score_bonus": 2
  },
  "복지_혁신": {
    "required_policies": ["기본소득 도입", "의료 인프라 확충", "디지털 세금 도입"],
    "bonus_effects": { "복지": 8, "시민 반응": 4 },
    "penalty_effects": { "재정": -5 },
    "evaluation": "혁신적인 복지 정책! 미래형 사회보장 시스템을 구축했습니다.",
    "score_bonus": 2
  },
  "기술_교육_시너지": {
    "required_policies": ["디지털 교육 확대", "기술 협력 확대", "평생학습 확대"],
    "bonus_effects": { "기술": 6, "경제": 4, "외교": 3 },
    "evaluation": "교육과 기술의 선순환! 미래 인재 양성의 완벽한 전략입니다.",
    "score_bonus": 2
  }
};

// 유틸리티 함수들
const GameData = {
  // 국가 데이터 가져오기
  getNation: (nationName) => NATIONS_DATA[nationName],
  
  // 정책 데이터 가져오기
  getPoliciesByCategory: (category) => POLICIES_DATA[category] || [],
  
  // 긴급정책 가져오기 (위기국가 전용)
getEmergencyPolicies: (category) => EMERGENCY_POLICIES[category] || [],

// 정책 찾기 (긴급정책 포함)
findPolicy: (policyName) => {
  // 기본 정책에서 찾기
  for (const category in POLICIES_DATA) {
    const policy = POLICIES_DATA[category].find(p => p.정책명 === policyName);
    if (policy) return policy;
  }
  
  // 긴급정책에서 찾기
  for (const category in EMERGENCY_POLICIES) {
    const policy = EMERGENCY_POLICIES[category].find(p => p.정책명 === policyName);
    if (policy) return policy;
  }
  
  return null;
},
  
  // 지표 정보 가져오기
  getIndicatorInfo: (indicator) => INDICATORS_INFO[indicator],
  
  // 밈 반응 가져오기
  getMemeReaction: (policyName) => {
    // 기본 반응 가져오기
    if (MEME_REACTIONS[policyName]) {
      if (MEME_REACTIONS[policyName].기본) {
        const reactions = MEME_REACTIONS[policyName].기본;
        return reactions[Math.floor(Math.random() * reactions.length)];
      } else if (Array.isArray(MEME_REACTIONS[policyName])) {
        const reactions = MEME_REACTIONS[policyName];
        return reactions[Math.floor(Math.random() * reactions.length)];
      }
    }
    return "시민들이 이 정책에 대해 이야기하고 있습니다 💬";
  },
  
  // 이벤트 데이터 가져오기
  getEventsForNation: (nationName) => EVENTS_DATA[nationName] || [],
  
  // 예산 페널티 확인
  getBudgetPenalty: (debt) => {
    for (const level in BUDGET_PENALTIES) {
      const penalty = BUDGET_PENALTIES[level];
      const [min, max] = penalty.range;
      if (debt >= max && debt <= min) {
        return penalty;
      }
    }
    return null;
  },
  
  // 엔딩 결정
  getEnding: (totalScore, indicators) => {
    const minIndicator = Math.min(...Object.values(indicators));
    
    for (const grade in ENDINGS_DATA) {
      const ending = ENDINGS_DATA[grade];
      const req = ending.requirements;
      
      if (totalScore >= req.total_score) {
        if (req.min_indicator !== undefined && minIndicator < req.min_indicator) {
          continue;
        }
        return { grade, ...ending };
      }
    }
    
    return { grade: "F급", ...ENDINGS_DATA["F급"] };
  },
  
  // 특별 엔딩 확인
  checkSpecialEndings: (indicators, selectedPolicies, nationName) => {
    const specialEndings = [];
    
    // 환경 지키미
    const envPolicies = selectedPolicies.filter(p => 
      ["탄소세 도입", "재생에너지 투자", "도시 녹지 확대"].includes(p)
    );
    if (indicators.환경 >= 3 && envPolicies.length >= 3) {
      specialEndings.push({ type: "환경_지키미", ...SPECIAL_ENDINGS["환경_지키미"] });
    }
    
    // 기술 혁신가
    const techPolicies = selectedPolicies.filter(p => 
      ["디지털 교육 확대", "기술 협력 확대", "평생학습 확대"].includes(p)
    );
    if (indicators.기술 >= 4 && techPolicies.length >= 3) {
      specialEndings.push({ type: "기술_혁신가", ...SPECIAL_ENDINGS["기술_혁신가"] });
    }
    
    // 복지 천국
    const welfarePolicies = selectedPolicies.filter(p => 
      ["기본소득 도입", "의료 인프라 확충", "공공주택 확대", "노인 복지 강화"].includes(p)
    );
    if (indicators.복지 >= 4 && indicators["시민 반응"] >= 2 && welfarePolicies.length >= 4) {
      specialEndings.push({ type: "복지_천국", ...SPECIAL_ENDINGS["복지_천국"] });
    }
    
    // 재건의 설계자
    const totalScore = Object.values(indicators).reduce((sum, val) => sum + val, 0);
    if (nationName === "위기국가" && totalScore >= 10) {
      specialEndings.push({ type: "재건의_설계자", ...SPECIAL_ENDINGS["재건의_설계자"] });
    }
    
    return specialEndings;
  },
  
  // 정책 조합 보너스 확인
  checkPolicyCombinations: (selectedPolicies) => {
    const combinations = [];
    
    for (const [comboName, combo] of Object.entries(POLICY_COMBINATIONS)) {
      const hasAllPolicies = combo.required_policies.every(policy => 
        selectedPolicies.includes(policy)
      );
      
      if (hasAllPolicies) {
        combinations.push({ name: comboName, ...combo });
      }
    }
    
    return combinations;
  }
};
   // 위기국가 전용 긴급정책
   const EMERGENCY_POLICIES = {
  "복지": [
    {
      "정책명": "🆘 긴급구호 배급소 운영",
      "비용": 15,
      "효과": {"복지": 8, "시민 반응": 6, "안정성": 2},
      "요구조건": {},
      "충돌정책": [],
      "시너지정책": ["국제사회 긴급지원 요청"],
      "정책_설명": "생존에 필요한 최소한의 식량과 의료품을 무료로 배급",
      "예상_시민반응": "목숨을 구해주셔서 감사합니다... 😢🙏",
      "emergency_only": true
    },
    {
      "정책명": "🏥 야전 의료소 설치",
      "비용": 20,
      "효과": {"복지": 6, "안정성": 3, "시민 반응": 4},
      "요구조건": {"안정성": -4},
      "충돌정책": [],
      "시너지정책": ["긴급구호 배급소 운영"],
      "정책_설명": "천막으로라도 응급처치가 가능한 의료소를 설치",
      "예상_시민반응": "간단한 치료라도 받을 수 있어서 다행이에요 🩹",
      "emergency_only": true
    }
  ],
  "경제": [
    {
      "정책명": "🔨 폐허 정리 공공근로",
      "비용": 18,
      "효과": {"경제": 6, "복지": 4, "환경": 3, "시민 반응": 3},
      "요구조건": {},
      "충돌정책": [],
      "시너지정책": [],
      "정책_설명": "무너진 건물 잔해 정리하며 일자리 제공",
      "예상_시민반응": "일이라도 있어서 다행... 다시 시작해볼게요 💪",
      "emergency_only": true
    },
    {
      "정책명": "💰 생계비 긴급지원",
      "비용": 25,
      "효과": {"경제": 4, "복지": 6, "시민 반응": 8},
      "요구조건": {"경제": -3},
      "충돌정책": [],
      "시너지정책": ["긴급구호 배급소 운영"],
      "정책_설명": "최소 생계유지를 위한 현금 직접 지원",
      "예상_시민반응": "당장의 생존이라도... 정말 감사합니다 😭💰",
      "emergency_only": true
    }
  ],
  "환경": [
    {
      "정책명": "🚰 식수 공급 시설 응급복구",
      "비용": 12,
      "효과": {"환경": 6, "복지": 8, "안정성": 4},
      "요구조건": {},
      "충돌정책": [],
      "시너지정책": [],
      "정책_설명": "최소한의 깨끗한 식수라도 공급할 수 있도록 긴급 복구",
      "예상_시민반응": "깨끗한 물이 나와요! 이제 살 수 있겠어요 💧✨",
      "emergency_only": true
    }
  ],
  "교육": [
    {
      "정책명": "📚 천막학교 긴급 운영",
      "비용": 10,
      "효과": {"기술": 4, "복지": 6, "시민 반응": 8},
      "요구조건": {},
      "충돌정책": [],
      "시너지정책": [],
      "정책_설명": "천막이라도 아이들이 배울 수 있는 공간 마련",
      "예상_시민반응": "우리 아이들에게 미래가... 희망이 보여요! 📖😊",
      "emergency_only": true
    }
  ],
  "외교": [
    {
      "정책명": "🌍 국제사회 긴급지원 요청",
      "비용": 5,
      "효과": {"외교": 6, "재정": 15, "경제": 4},
      "요구조건": {},
      "충돌정책": [],
      "시너지정책": [],
      "정책_설명": "자존심을 버리고 국제사회에 인도적 지원 요청",
      "예상_시민반응": "자존심보다 생존이 우선이죠... 🙏🌍",
      "emergency_only": true
    },
    {
      "정책명": "🤝 해외동포 지원금 수용",
      "비용": 8,
      "효과": {"외교": 4, "재정": 12, "시민 반응": 6},
      "요구조건": {"외교": -2},
      "충돌정책": [],
      "시너지정책": ["국제사회 긴급지원 요청"],
      "정책_설명": "해외에 거주하는 동포들의 모금 지원금 수용",
      "예상_시민반응": "멀리 있어도 우리를 생각해주는 분들이... 😭❤️",
      "emergency_only": true
    }
  ]
};

// 전역 변수로 내보내기
window.GameData = GameData;
window.NATIONS_DATA = NATIONS_DATA;
window.POLICIES_DATA = POLICIES_DATA;
window.GAME_CONFIG = GAME_CONFIG;
window.INDICATORS_INFO = INDICATORS_INFO;
window.MEME_REACTIONS = MEME_REACTIONS;
window.EVENTS_DATA = EVENTS_DATA;
window.BUDGET_PENALTIES = BUDGET_PENALTIES;
window.ENDINGS_DATA = ENDINGS_DATA;
window.SPECIAL_ENDINGS = SPECIAL_ENDINGS;
window.POLICY_COMBINATIONS = POLICY_COMBINATIONS;
window.EMERGENCY_POLICIES = EMERGENCY_POLICIES;


